TODOS

additional compiler passes
* domino per-function printing
* bounded packet history inference + splitting, i.e., on-switch and off-switch
  - predicated expressions for state variables
  - detect linear-in-state; find predicated A,B expressions
  - vector-valued state: matrices
* pass: handling groupby code generation correctly with `uid` in aggregation
* pass: combine with located expr tree to only install on specific switches
* pass: rules needed to generate outputs for query. By default, assume each
  stage is some intermediate stage; generate output code only for toplevel.
* handle tout==infinity in filter code generation

issues to think about
* guarantees of fixed point algorithms for linear-in-state + bounded packet hist
  - casting as lattice theory/abstract interpretation
* semantics for multi-stage groupby queries
* emit() versus functional design

hardware-oriented passes
* making kv store an extern + configure extern
* configure domino atoms from aggregation functions
----- end of December
* configure the tofino chip

simplifying code
* simplify ternary threeopstmts. e.g., z = true ? x : y ==> z = x
* remove define-before-use checking class and redundant code
* change code generated for map to 'functional' semantics?
* make predicates "smart", e.g., AugPred(true).and(X) == X
* current map code is dead code if operand is invalid
* remove `_` at beginning of identifiers; make compiler-defined variables start
  with `_` instead
* cleanup code: add @Override annotation to new antlr visitor passes!
* simple way to check whether a switch is an egress switch?
* language identifiers for constants, like TCP protocol number

printing p4 code from IRs
* emitting three operand code in p4: variables prefixed by types (e.g.,
  "metadata", "packet", "register", etc.)
* emits should load state on to packets

possible error handling for aggregate functions
* warn if no code path changes the state variables
* warn if predicates are used
* print code line numbers in errors. e.g., see define before use error msgs
* better formatting for error messages

cleaning up the template
* set defaultValue for aggfun through a template parameter
  - what's the language construct?
* multiple stages with specific code to insert
